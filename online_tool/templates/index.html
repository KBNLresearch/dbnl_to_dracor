{% extends 'base.html' %}

{% block header %}
{% endblock %}

{% block content %}
 <form method="post">
     <label for="url"><b>DBNL input XML: </b></label><br>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <input type="text" size="60" name="url" value='{{ opdict['url'] }}'></input><br><br>
    <input type="checkbox" id="remove_pb" name="op" value="remove_pb" {{'checked' if opdict['remove_pb'] else ''}}>
    <label for="pb"> "pb" elementen inclusief attributen pb.*?</label><br>
    <input type="checkbox" id="remove_hi" name="op" value="remove_hi" {{'checked' if opdict['remove_hi'] else ''}}>
    <label for="hi"> "hi" elementen inclusief attributen, exclusief inhoud hi.*? + hi.*?\n.*? + hi</label><br>
    <input type="checkbox" id="remove_rend" name="op" value="remove_rend" {{'checked' if opdict['remove_rend'] else ''}}>
    <label for="rend"> "rend" attributen inclusief waardes rend=".*?</label><br>
    <input type="checkbox" id="remove_xptr" name="op" value="remove_xptr" {{'checked' if opdict['remove_xptr'] else ''}}>
    <label for="xptr"> elementen inclusief attributen xptr.*?</label><br>
    <input type="checkbox" id="remove_note" name="op" value="remove_note" {{'checked' if opdict['remove_note'] else ''}}>
    <label for="note"> elementen inclusief attributen note.*?</label><br><br>
    <input type="submit" value="Parse XML" style='margin-left: 200px;'><br>
  </form>

  {% if xml_data %}
  <br>
  Removed <font style='color: red'> {{ opdict['stats'] }} </font> bytes.<br><br>

  <form id="xmlForm">
        <textarea id="xmlEditor"></textarea>
    </form>
    <script>
        const initialXML = `{{ xml_data | safe }}`;
        const editor = CodeMirror.fromTextArea(document.getElementById('xmlEditor'), {
            theme: 'default', 
            readOnly: true,
            cursorBlinkRate: -1,
            mode: "xml",
            matchTags: {bothTags: true},
            styleActiveLine: true,
            lineNumbers: true,
            indentWithTabs: true,
            indentUnit: 4,
        });
        editor.setValue(initialXML);
    </script>
  {% endif %}
{% endblock %}
